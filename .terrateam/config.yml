engine:
  name: tofu
hooks:
  all:
    pre:
    - type: env
      name: TENV_LATEST_VERSION
      cmd: ['echo', 'v4.2.4']
    - type: run
      cmd: ['curl', '-o', '/tmp/tenv_${TENV_LATEST_VERSION}_amd64.deb', '-O', '-L', 'https://github.com/tofuutils/tenv/releases/download/${TENV_LATEST_VERSION}/tenv_${TENV_LATEST_VERSION}_amd64.deb']
    - type: run
      cmd: ['dpkg', '-i', '/tmp/tenv_${TENV_LATEST_VERSION}_amd64.deb']
    - cmd:
      - test
      - ${TERRATEAM_TF_CMD}
      - '='
      - tofu
      type: run
workflows:
  - tag_query: ''
    plan:
      - type: env
        method: source
        cmd: ['${TERRATEAM_ROOT}/unset-path']
      - type: run
        cmd: ['tenv', 'tofu', 'detect']
      - type: init
      - type: plan
