engine:
  name: terragrunt

workflows:
  - tag_query: 'dir:tf'
    engine:
      name: terraform
    plan:
      - type: init
      - type: plan
      - type: run
        cmd: ['test', '${TERRATEAM_TF_CMD}', '=', 'terraform']
    apply:
      - type: init
      - type: apply
      - type: run
        cmd: ['test', '${TERRATEAM_TF_CMD}', '=', 'terraform']
  - tag_query: 'dir:tf1'
    engine:
      name: tofu
    plan:
      - type: init
      - type: plan
      - type: run
        cmd: ['test', '${TERRATEAM_TF_CMD}', '=', 'tofu']
    apply:
      - type: init
      - type: apply
      - type: run
        cmd: ['test', '${TERRATEAM_TF_CMD}', '=', 'tofu']
