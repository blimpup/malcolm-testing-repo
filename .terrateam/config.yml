engine:
  name: tofu

hooks:
  all:
    pre:
      - type: run
        cmd: ['bash', '-c', 'curl -fsSL https://pyenv.run | bash']
      - type: run
        cmd: ['apt', 'update']
      - type: run
        cmd: [
        'apt',
        'install',
        '--yes',
        'build-essential',
        'libssl-dev',
        'zlib1g-dev',
        'libbz2-dev',
        'libreadline-dev',
        'libsqlite3-dev',
        'curl',
        'git',
        'libncursesw5-dev',
        'xz-utils',
        'tk-dev',
        'libxml2-dev',
        'libxmlsec1-dev',
        'libffi-dev',
        'liblzma-dev']
      - type: env
        name: PYENV_ROOT
        cmd: ['echo', '$HOME/.pyenv']
      - type: env
        name: PATH
        cmd: ['echo', '$PYENV_ROOT/bin:$PATH']
      - type: run
        cmd: ['pyenv', 'install', '3.11.11']
      - type: run
        cmd: ['pyenv', 'global', '3.11.11']
      - type: run
        cmd: ['pyenv', 'exec', 'python', '--version']
