#! /usr/bin/env python3

import hashlib
import json
import os

def hash_file(path):
    with open(path, 'rb') as f:
        return hashlib.md5(f.read()).hexdigest()

files = []

for root, dirs, fs in os.walk('./'):
    files.extend([
        {
            'path': os.path.join(root, f),
            'id': hash_file(os.path.join(root, f)),
        }
        for f in fs])

print(json.dumps(files))
